INTSourceChangelist:3429227
Availability:Public
Title:アクタのトランスフォーム
Crumbs: %ROOT%, Engine, Engine/Actors
Description:レベルに配置されたアクタの位置、回転、スケーリングを修正します。
parent:Engine/Actors
type:overview
order:3
topic-image:actortransform_topic.png


[TOC(start:2)]

アクタのトランスフォームとは、レベル編集プロセスの重要な部分であるアクタの移動、回転、スケーリングを意味します。アンリアル エディタでは、2 種類の基本的な方法でアクタにトランスフォームを適用することができます。どちらの方法でも選択中であれば全てのアクタにトランスフォームを適用できます。

## 手作業によるトランスフォーム

[INCLUDE:Engine/UI/LevelEditor/Details/Customizations/Transform#Transform]

## インタラクティブなトランスフォーム

2 つめの方法は、ビューポートにビジュアル ツールすなわちウィジェットを表示して使用する方法です。ウィジェットの場合、マウスを使ってビューポートで直接アクタを移動、回転、スケーリングすることができます。手作業とは逆の良い点と悪い点があります。この方法は非常に直観的ですが、正確とは程遠い場合があります。しかし、時として正確さは必要となります。確実に正確さを高めるには、ドラッググリッド、回転グリッド、スケーリング グリッドが役立つ場合があります。既知の値や増分にスナップできる機能によって、より正確な制御ができます。

ビューポートでアクタを操作するために使用するビジュアルツールは、トランスフォーム ウィジェットと呼ばれます。通常、トランスフォーム ウィジェットは、いくつかのパーツから構成され、それらのパーツは影響を与える軸別に色分けされています。

* 赤は、X 軸が影響を受けることを意味します。
* 緑は、Y 軸が影響を受けることを意味します。
* 青は、Z 軸が影響を受けることを意味します。

トランスフォーム ウィジェットは、どのタイプのトランスフォームが行われているかに応じて平行移動、回転、スケーリングという様々な形態をとります。ビューポートの右上のセクションにあるツールバーでアイコンをクリックして使用したいトランスフォーム ウィジェットのタイプを選択できます。

![](LE_Trans_WidgetIcons.png)

[REGION:tip]
キーボード上でスペースバーを押せば、様々なトランスフォーム ウィジェット間の切り替えができます。
[/REGION]

### 平行移動ウィジェット

[EXCERPT:TranslateWidget]

**平行移動ウィジェット** には、色分けされた矢印セットがあり、ワールドにおける各軸の正方向を指しています。基本的には、これらの矢印が、特定の軸に沿って選択したアクタをドラッグして移動させるためのハンドルとなります。カーソルをハンドル上にあてると、ハンドルが黄色になり、ドラッグでオブジェクトが軸に沿って移動することを示します。

![Translation Widget - Axis](LE_Trans_Widget.png)

また、各ハンドルからは線が伸びており、他の軸から出ている線同士がつながります。そしてそれぞれのプレーン (XY、XZ、YZ) の 1 つに沿って四角形を作ります。その四角形上にカーソルを当てると、四角形と四角形を形成している矢印が黄色に変わります。黄色く変わった 2 本の軸で定義されたプレーンに沿ってアクタをドラッグして移動させます。

![Translation Widget - Plane](LE_Trans_Plane.png)

3 本すべての軸が交わる場所に白い小さな球があります。この球上にカーソルを当てると黄色に変わり、ドラッグできることを示します。中央の球をドラッグするとアクタは、3 本の軸に沿って潜在的に位置の値を変えながら、シーン カメラと相対的に空間を自由に移動します。

![Translation Widget - All](LE_Trans_All.png)

[/EXCERPT:TranslateWidget]

### 回転ウィジェット

**回転ウィジェット** は、それぞれの軸に関連付いている、色分けされた 3 つの円弧のセットです。円弧の 1 つをドラッグすると、選択中のアクタが軸の周りを回転します。**回転ウィジェット** の場合、関係する円弧の 1 つの影響を受ける軸は、その円弧に対して垂直な軸です。つまり、XY プレーンに位置合わせした円弧が実際はアクタを Z 軸の周りに回転させます。

![Rotation Widget](Transform_Rotate.png)

特定の円弧上にカーソルを当てると円弧が黄色になり、アクタをドラッグして回転を変更できることを表しています。

![Rotation Widget](Transform_Rotate_Axis.png)

選択中のアクタを回転するためにドラッグを開始すると、ウィジェットの形が変化し、アクタの回転の中心となる軸のみが表示されます。回転量がリアルタイムで表示されるので、進捗がわかりやすくなります。

![Rotation Widget](Transform_Rotate_Offset.png)

###スケーリング ウィジェット

**スケーリング ウィジェット** には端にキューブが付いた色分けされたハンドルがあります。ハンドルの 1 つを使ってウィジェットをドラッグすると、関連する軸に沿ってのみ選択中のアクタはスケーリングされます。**平行移動ウィジェット** や **回転ウィジェット** と同様、ハンドルは軸ごとに色分けされています。 

![Scaling Widget](LE_Trans_ScaleWidget.png)

**平行移動ウィジェット** を使用して同時に 2 本の軸で定義されたプレーンに沿ってアクタを動かすことができるように、 2 本の軸に同時に合わせてアクタをスケーリングすることができます。**Scaling Widget** の各ハンドルからは線が延びていて、それぞれが別の軸の線とつながります。3 つのプレーン (XY、XZ、YZ) の 1 つに沿って三角形を作ります。そのうちの 1 つの三角形をドラッグすると、プレーンを定義している両方の軸でアクタがスケーリングされます。いずれかの三角形上にカーソルを当てると、関連するハンドルが黄色になります。

![Scaling Widget - Plane](LE_Trans_Scale2Axes.png)

3 本すべての軸に合わせてアクタをスケーリングすることも可能なので、オリジナルの比率を維持できます。3 本の軸がすべて重なるキューブ上にカーソルを当てると、3 つ全てのハンドルが黄色になります。中央にあるキューブをドラッグするとアクタが相対的にスケーリングされます。

![Scaling Widget - All](LE_Trans_ScaleAll.png)

### アクタのピボット (回転軸) の調整

オブジェクトにトランスフォームを適用する場合、通常はオブジェクトの基本ピボットから行います。ただし、このピボット位置を調整した方がよいトランスフォーム操作もあります。

![](DefaultPivot.png)(w:500)

**平行移動ウィジェット** の中心点から **マウスホイール** をクリックしドラッグすれば、ピボットを一時的に動かすことができます。その後は普通にスペースバーで各種トランスフォーム ツールを切り替えることができます。

![](AdjustedPivot.png)(w:500)

新規ピボットを使ってアクタの変更が可能になりました。

![](TransformAroundNewPivot.png)(w:500)

どれかオブジェクトをクリック (選択) すれば、ピボットはすぐにデフォルト位置に戻ります。

### ワールド トランスフォーム モードとローカル トランスフォーム モード

インタラクティブなトランスフォーム方法を用いる場合、トランスフォームを行う時に利用する座標系を選ぶことができます。つまり、ワールド軸に合わせてワールド空間でアクタをトランスフォームしたり、ローカル軸に合わせてローカル空間でアクタをトランスフォームすることができます。柔軟性はぐんと広がりますが、手動で値を設定するだけではほぼ無理で、まず最初にかなりの数の複雑な計算を行うことが必要になります。
[REGION:imagetable]
| ![](Transform_World.png)(w:400) | ![](Transform_Local.png)(w:400) |
| ------ | ------ |
| ワールド | ローカル |
[/REGION]

アンリアル エディタはデフォルトでワールド トランスフォーム モードで開始します。ローカルのトランスフォーム モードに切り替えるには、ビューポートの右上にあるツールバーの [Globe] アイコンをクリックします。[Globe] アイコンから [Cube] アイコンになったら、ローカルのトランスフォーム モードに変わったことを表します。

![](LE_Trans_CubeIcon.png)

[Cube] アイコンをクリックすると、ワールド トランスフォーム モードに戻ります。


## スナップ

3 種類の各手動トランスフォーム ツールには、その値を一定の増分でスナップする機能があります。レベル内にオブジェクトを正確に配置する場合に便利です。スナッピングの方法は 4 通りあります。

* Drag Grid 
* Rotation Grid 
* Scale Grid
* Vertex Snapping



### Drag Grid、Rotation Grid、Scale Grid

[VAR:GridImage]
w:300
[/VAR]

[REGION:imagetable]
|![](DragGrid.png)(%GridImage%)|![](RotationGrid.png)(%GridImage%)|![](ScaleGrid.png)(%GridImage%)|
|:---:|:---:|:---:|
|Drag Grid|Rotation Grid|Scale Grid|

[/REGION]

**Drag Grid** は、シーン内で暗黙的な 3 次元グリッドへのスナップを可能にします。**Rotation Grid** では、インクリメンタル回転スナップが可能です。**Scale Grid** は、スケール ウィジェットに加算インクリメントのスナップを強制しますが、スナップの環境設定でパーセント値に設定することができます。

ビューポート ツールバー内のアイコンをクリックすると、スナッピング グリッドが立ち上がります。立ち上がると、アイコンがハイライトされます。各グリッドのインクリメントの変更は、それぞれのアクティベーションボタンの右にあるドロップダウンで行います。


### スナッピングの環境設定

Drag Grid、Rotation Grid、Scale Grid の全ての設定は [Editor Preferences (エディタの環境設定)] パネルから行います。スナップ動作もいくつか設定できます。 

これらの環境設定は、メインのメニューバーから **[Edit] > [Editor Preferences] > [Viewports]** を選択してから **[Snap(スナップ)]** カテゴリまでスクロールします。

![](SnapSettings.png)


#### ユーザー定義のインクリメント

Drag Grid、Rotation Grid、Scale Grid を使用する場合、各ツールのドロップダウンには事前設定されたインクリメントの列とユーザー定義のインクリメントの列が含まれていることに気付くでしょう。

![](UserDefinedIncrementsShown.png)

ユーザー定義リストを追加するには、 [Snap Preferences (スナップの環境設定)] の [array] プロパティを使用します。

![](UserDefinedArrays.png)

* **Grid Sizes** - 平行移動ウィジェットに対しユーザー定義のスナップ インクリメントを維持します。
* **Rotation Snap Intervals** - 回転ウィジェットに対しユーザー定義のスナップ インクリメントを維持します。
* **Scale Grid Sizes** - スケール ウィジェットに対しユーザー定義のスナップ インクリメントを維持します。

### 頂点のスナッピング

メッシュのポリゴンの頂点を使ってあるオブジェクトを別のオブジェクトにスナップしたい場合があるでしょう。これを行うには、平行移動ウィジェットを使用しながら、 **[V] キー** を押します。**[V]** を押しながらオブジェクトの移動を開始すると、利用できるポリゴンの頂点がすべてハイライトされます。

![](VertexSnapping.png)(w:500)

ピボットを直接頂点にスナップした後で、それを別のオブジェクト上の頂点にスナップする手段として使用できるため、ピボット調整と一緒に使用すると特に便利です。以下の画像では、この方法を使ってパイプの 2 つのピースをスナップして正確につなげる方法を示しています。

![](VertexSnappedPivot.png)(w:500)
[REGION:caption]
[V] キーを押しながらマウスホイールを使って、既存の頂点に対してオブジェクトのピボットをスナップすることができます。
[/REGION]

ピボットが移動したら、移動先の位置を使って別のメッシュ上の対応する頂点にオブジェクトをスナップします。

![](VertexSnappingObjects.png)(w:500)
[REGION:caption]
ドラッグしながら [V] キーを使って、別のメッシュの適切な頂点にオブジェクトをスナップすることができます。
[/REGION]

これを繰り返すと、メッシュをきれいに配置することができます。通路、壁、ドアなど、別のメッシュやオブジェクトに対して正確な配置を要する場合に役立つテクニックです。

![](snappedMeshes.png)(w:500)




