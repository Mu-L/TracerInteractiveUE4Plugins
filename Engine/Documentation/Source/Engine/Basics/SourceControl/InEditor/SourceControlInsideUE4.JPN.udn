INTSourceChangelist:2677435
Availability:Public
Title:アンリアル エディタ内のソース コントロール
Crumbs: %ROOT%, Engine, Engine\Basics\SourceControl
Description:UE4 内でソースコントロール ソフトウェアを使用する方法 
Related:Engine/UI/SourceControl
Related:Engine/Content/Browser
Related:Engine/Basics/Redirectors
Related:Engine/UI/ProjectSettings
Related:Programming/Basics/ConfigurationFiles
version:4.9

[TOC(start:2)]


どのソース コントロール ソフトウェアを使用することになっても UE4 内からソフトウェアとインターフェースするやり方は同じです。以下では、UE4 内でのソース コントロールの使用について知っておくべき 
ことを詳しく説明します。 



## アンリアル エディタ内でのコラボレーション ワークフロー
アンリアル エンジン 4 では、プロジェクトで複数ユーザーが非常に簡単にコラボレーションできます。以下のセクションでは、アンリアル エディタ内で様々なコラボレーション ツールがどのように機能するかについて説明します。 

### アンリアル エディタでファイルをチェックアウトする
共同作業者とコンテンツを共有する主な方法は、 [コンテンツ ブラウザ](Engine/Content/Browser) を使用するやり方です。すべてのソース コントロール操作はファイルやフォルダのコンテキスト メニューから利用できます。 
例えば、ファイルを **チェックアウト** (すなわち編集のためにロック) するには、**コンテンツ ブラウザ** でアセット上で **右クリック** し、**チェックアウト** オプションを選択します。

![](SC_UE4_Checkout_1.png)

保存時にファイルを自動的にチェックアウトするようにエディタを設定できます。これは、**[Prompt for Checkout on Asset Modification (アセット変更時にチェックアウトするかを確認する)]** を有効にして行います。 
以下の順序、**Editor Preferences** -> **Loading & Saving** -> **Source Control** に従いこうしたオプションを利用できます。

![](SC_UE4_Checkout_2.png)

エディタ内で初めてファイルを保存したときにそれを自動的にソース コントロールに追加するようにアンリアル エディタを設定することもできます。以下の順序、 
**Editor Preferences** -> **Loading & Saving** -> **Source Control** に従いこうしたオプションを利用できます。これを行うには、デフォルトでオンになっている **[Add New Files when Modified (変更時に新しいファイルを追加)]** オプションを有効にするだけです。
アセットの編集を開始するとファイルのチェックアウトを求める通知が画面の右下隅に提示されます

![](SC_UE4_Checkout_3.png)

これで編集前にアセットをチェックアウトできるようになります。**チェックアウト** リンクをクリックすると、次のダイアログが表示されます。

![](SC_UE4_Checkout_4.png)


|番号 | プロパティ名前| 説明|
|--------|------------|------------|
| 1:     | **Check Out Selected**|リストにチェックインされたファイルをチェックアウトします。|
| 2:     | **Make Writable**|リードオンリー フラグ (存在する場合) をクリアし、ローカルでファイル編集をできるようにします。|
| 3:     | **Ask Me Later**|作業を続けて、後でファイルをチェックアウトするようにできます。|

**コンテンツブラウザ** でオブジェクトを **右クリック** し、**ソース コントロール** オプションに進むと現在のアセットの状態を示す様々な記号が表示されているのがわかります。 

| アイコン | 説明 |
|--------|-------------|
|  ![](SC_UE4_Checkout_Check.png)					|リストにチェックインされているファイルをチェックアウトします。|
|  ![](SC_UE4_Checkout_Add.png)						|ソース コントロールへの追加のマーク付けがされました。|
|  ![](SC_UE4_Checkout_New_Version.png)				|ソース コントロールにファイルの新しいバージョンがあります。|
|  ![](SC_UE4_Checkout_File_Not_Under_Source.png)	| ファイルはソース コントロール下にはありません。|
|  ![](SC_UE4_Checkout_By_Another_User.png)			| 別のユーザーがチェックアウトしています (アセット上にマウスをかざすと誰がファイルをチェックアウトしたかがわかります)。|
|  ![](SC_UE4_Checkout_For_Branch.png)				| ファイルはブランチ/コピーのためにチェックアウトされています (ファイルが別の場所からコピーされている場合、複数のプロバイダが表示されます)。|


### ソース コントロールにサブミットする
ソース コントロールに何もサブミットしないと作業内容、成果物が他のユーザーから見えないため、 
UE4 内のソース コントロールへのサブミットはソース コントロール プロセスの重要な部分です。多くの変更を伴う作業をする場合、または加えた変更を詳しくは追跡しない場合に便利なワークフローは、以下の通りです。 
エディタの **[ファイル]** メニューから **[Submit to Source Control (ソース コントロールにサブミット)]** オプションを選択します。

![](SC_UE4_Submit_To_Source.png)

これで、アセットに加えられたサブミット可能な変更があるかについてプロジェクトとエンジンがスキャンされ、続いて Submit Files ダイアログが表示されます。

![](SC_UE4_Submit_To_Source_CL_Description.png)

変更内容を入力し、**OK** をクリックします。次にソース コントロールにファイルをコミット/サブミットします。

### ファイルを同期する 
他の人が加えた変更を取得したい場合、**コンテンツ ブラウザ** 内のファイルまたはフォルダを **右クリック** して **[Sync]** オプションを選択します。 
または、Perforce (P4V) などの外部プログラムを使用して **Sync** することもできます。しかし、これを行う場合はエディタをシャットダウンすることをお勧めします。開いていると編集できないようにファイルをロックする場合があるからです。

[region:note]
ファイルが **Out of Sync (同期していない)** (すなわち、ローカルにあるものよりも新しいバージョンがソース コントロール サーバーにある) の場合、 ![](SC_UE4_Checkout_New_Version.png) アイコンが
**コンテンツ ブラウザ** のアセットによって表示されます。
[/region]

### ファイルを追加する 
チェックアウトのワークフローと同様に、[preferences] にある **[Add New Files When Modified (変更があったら新規ファイルを追加)]** オプションを使用して新規ファイルをソース コントロールに自動的に追加することができます。

[region:note]
追加されたファイルは ![](SC_UE4_Checkout_Add.png) 記号が付けられて **コンテンツ ブラウザ** に表示されます。また、ファイルがチェックアウトされるのと同様にチェックインされます。
[/region]

### ファイルを削除する 
既にソース コントロールにあるアセットを削除するのは手間がかかります。通常、他のアセットから参照されているからです。 
**コンテンツ ブラウザ** でファイルを選択し、**[Delete (削除)]** (または **右クリック** メニューから選択したら)、**[Delete Assets]** ダイアログが表示されます。 

![](SC_UE4_Delete_Assets.png)

| 番号 | 名前 |説明|
| ---| ---- | ---------- |
| 1| **Pending Deleted Assets** | これは削除しようとしているアセットです。|
| 2| **Assets Referencing the Pending Deleted Assets** | 削除しようとしているアセットを参照しているアセットが表示されます。|
| 3| **Replace References** | このアセットが削除されたらそれを参照する他のアセットにどのアセットを参照してほしいかを指定します。|
| 4| **Force Delete** | ここでは、アセットの削除を強制できます。しかし、プロジェクトに非常にネガティブな影響を及ぼすおそれがあるため、強制的な削除を行う場合は注意を払ってください。他のものが何も機能しない場合の最終手段に限り、このオプションを使用するようにしてください。|
| 5| **Cancel** |削除操作を取り消します。|

削除の処理方法を選択したら、ファイルは [リダイレクタ](Engine/Basics/Redirectors) という非表示の **アセット** で置き換えられます。アセット削除時に作成される [リダイレクタ](Engine/Basics/Redirectors) をクリーンアップしたい場合は、 
**コンテンツブラウザ** にある **フォルダ** 上で右クリックし、**[Fix Up Redirectors in Folders]** を選択します。これでプロジェクト内の参照が修正され、 
リダイレクタを永久に削除し、ソース コントロールで削除のためにファイルをマーク付けします。現在、こうした削除をコミットするには、P4V または TortoiseSVN などの外部ツールを使用する必要があります。

### レベルのファイル
レベルは他のアセットのように **コンテンツ ブラウザ** を介してソース コントロールで管理することができます。しかし、レベルは **レベル ブラウザ** のメニューを介して作業することもできます。 
これには、**ソース コントロール** のサブメニューにあるソース コントロールのオプションも含まれます。
![](SC_UE4_Level_Broswer.png)

### Config (.ini) ファイル
エディタとプロジェクトの多くのコンフィギュレーション オプションはコンフィギュレーションファイル、短縮すると config ファイルに格納されています。こうしたファイルの一部はソース コントロール下で維持する必要があります (ソース コントロールに Config/ ディレクトリを追加する場合は上記を参照)。 
エディタにある設定には、チームのメンバーが様々な設定を共有できるように、これらをチェックイン、チェックアウトする方法があります。例えば、**Edit** -> **Project Settings** では、以下のインジケータがあります。

![](SC_UE4_Project_Description.png)

ファイルをチェックアウトすると、こうした設定を編集できます。残念ながら現時点ではこうしたファイルをエディタからソース コントロールに戻してチェックインする方法はありません。 
そのため、 P4V や TortoiseSVN などの外部ツールを使用して アンリアル エディタ セッション外にこうしたファイルをチェックインする必要があります。











