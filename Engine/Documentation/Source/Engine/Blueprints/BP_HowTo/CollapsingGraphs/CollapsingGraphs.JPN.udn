INTSourceChangelist:3244370
Availability:Public
Title:グラフを折り畳む
Crumbs: %ROOT%, Engine, Engine\Blueprints, Engine\Blueprints\BP_HowTo
Description:ノードを折り畳んで新しいグラフ、関数、またはマクロにします。 
Related:Engine/Blueprints/UserGuide
Related:Engine/Blueprints/UserGuide/Functions
Related:Engine/Blueprints/UserGuide/Macros
version:4.9
skilllevel:Beginner
parent:Engine/Blueprints/BP_HowTo
type:how-to
order:4
tags:Blueprints

このページでは、**ブループリント** グラフを折り畳んで、単一のノード、**関数** または **マクロ** にするいくつかの方法について説明します。こうすることで、大きなグラフをリンク付けされたグラフに統合して整理します。 

[TOC(start:2)]

## ノードを折り畳む

以下で図示している折り畳みの最も簡単な方法は、**ノードを折り畳んで (Collapsing Nodes)** リンク付けされたグラフにすることです。これらは、主にイベント グラフ内で整理し、見た目をよくするために使用されます。 

1. **ブループリント** の **グラフ** で折り畳むノードを決めます。 

	![](Collapse1.png)(w:740)

	ジャンプ後にプレイヤーのエネルギーを減らすノードがあります。 

1.	**左クリック** してノード上をドラッグして折り畳むすべてのノードを選択します。 

	![](Collapse2.png)(w:740)

	**[Control] と左クリック** で選択した内容へのノードの追加や削除が可能です。 

1.	折り畳みたいノードがあれば、選択したノードを **右クリック** して、**[Collapse Nodes (ノードを折り畳む)]** を選択します。 

	![](Collapse3.png)

1.	ノードは単一の **Collapsed Graph** ノードに折り畳まれ、名前を付けることができます。 

	![](Collapse4.png)

1.	**Collapsed Graph** ノード上にマウスをかざすと、ノード ネットワークのプレビュー ウィンドウが表示されます。 

	![](Collapse5.png)

1.	**[Collapsed Graph]** を **ダブルクリック** すると、新規グラフが選択したノードと共に開きます。 

	![](Collapse6.png)(w:740)

1.	**Collapsed Graph** 内で**[Details (詳細)]** パネルから **Inputs** ノードまたは **Outputs** ノードにピンを追加することができます。 

	![](Collapse10.png)

	折り畳み時にデフォルトで **Execute** が追加されます。ここでは 2 つの 実行出力ピンを追加しました。**OutOfEnergy** と **CanJump** の 2 つです。 

	グラフを修正して、プレイヤーが持っている全体的なエネルギーから差し引く前に、プレイヤーがエネルギー切れしているかをチェックするようにもしました。 

	![](Collapse8.png)(w:740)

	折り畳まれたノードを持つ **イベントグラフ** は以下のようになります。 

	![](Collapse9.png)(w:540)

1.	折り畳まれたノード上で **右クリック** し、**[Expand Node (ノードを展開する)]** を選択してノードを展開することができます。 

	![](Collapse7.png)


## 関数に折り畳む

ノードを折り畳むもうひとつの方法は、**関数** に折り畳むことです。ノードを関数に折り畳むことは、折り畳んだグラフと比べて以下のようなメリットがあります。すなわち、スクリプトの別のエリアにある関数を、指定する任意のパラメータに基づき呼び出すことができるだけでなく、別のブループリント内から関数を呼び出すこともでできます (呼び出したい関数を含むブループリントへの参照を提供する場合に限ります)。 

以下はノードを関数に折り畳む手順です。 

1.	折り畳むノードを選択した状態で、ノード上で **右クリック** して、**[Collapse to Function (関数に折り畳む)]** を選択します。 

	![](CollapseFunction1.png)(w:700)

1.	新規 **関数** が作成されます。これは **F2** を押して **[MyBlueprint]** ウィンドウから名前を変更できます。 

	![](CollapseFunction2.png)

	ブループリントをコンパイルすると警告メッセージが消えます。 

	![](CollapseFunction3.png)

	ここで関数の名前を変更することができます。

1.	関数上で **ダブルクリック** すると新規グラフ ウィンドウで関数が開きます。 

	![](CollapseFunction4.png)

	折り畳んだグラフと同様に **Inputs** ノードまたは **Outputs** ノードをクリックして **[Details (詳細)]** パネルからピンを追加することができます。 

1.	指定した条件に基づいて、名前で関数を呼び出すことができます。 

	![](CollapseFunction5.png)

	ここでは F キーを押すと、常に **Remove Energy** 関数が呼び出されます。 

1.	関数上で **右クリック** して **Expand Node** オプションを選択すると、展開操作をリバートできます。 

関数の使用または呼び出しに関する詳細は、[](Engine/Blueprints/UserGuide/Functions) のドキュメントをご覧ください。 


## マクロに折り畳む

折り畳んだグラフまたは関数に折り畳むだけでなく、ノードを **マクロ** に折り畳むこともできます。マクロの考え方として最適なのは、接続されているいくつかのノードを利用し、必要なことを何もかもオールインワンで行うひとつのノードに統合できるというものです。これは頻繁に行うと、複雑な数式がある場合などに非常に役立ちます。 

ノードをマクロに折り畳む手順については以下をご覧ください。 

1.	折り畳むノードを選択した状態で、ノード上で **右クリック** して、**[Collapse to Macro (マクロに折り畳む)]** を選択します。 

	![](CollapseMacro1.png)(w:700)

1.	新規マクロが作成されます。これは **F2** を押して **[MyBlueprint]** ウィンドウから名前を変更できます。 

	![](CollapseMacro2.png)

1.	マクロ上で **ダブルクリック** するとマクロが開きます。 

	![](CollapseMacro4.png)(w:700)

	ノードを折り畳む他の方法と同様に、必要に応じて **Input** ピンまたは **Output** ピンを追加することができます。 

	以下は、追加ピンを備えたマクロを実装したイベント グラフです。 

	![](CollapseMacro5.png)

1.	マクロを **右クリック** し、**[Expand Node]** を選択してそのノード ネットワークを展開することができます。 

マクロに関する詳細は、[](Engine/Blueprints/UserGuide/Macros) のドキュメントをご覧ください。 









