Availability:Public
Title:ライトシャフト
Crumbs: %ROOT%, Engine, Engine/Rendering/LightingAndShadows
Description:大気中にライトを散乱（スキャッタリング）させるシミュレーション
Version:4.9
topic-image:LShaft_Topic.png

[REGION:banner]
![](lightShafts_banner.png)
[/REGION]

[TOC(start:2)]



[EXCERPT:Lightshafts]
**ライトシャフト** は薄明光線や大気中のインスキャタリングの大気中のシャドウイングなど現実的な効果をシミュレートするために、指向性ライトで生成することができます。光は深度を増して全シーンに対し現実感をもたらします。
[/EXCERPT:Lightshafts]

## プロパティ

指向性ライトのプロパティには **[Light Shaft]** カテゴリがあります。以下にこれらのプロパティの参照を示します。

| プロパティ | 説明 |
| -------- | ----------- |
|[REGION:tablesection] _指向性ライト_ [/REGION]||
| **Enable Light Shaft Occlusion** | ライトからのスクリーン空間の不明瞭なオクルージョンで、フォグと大気中のインスキャッタリングをオクルードするか否かを設定するプロパティです。 |
| **Occlusion Mask Darkness** | オクルージョンマスクキングの濃度を制御します。値を 1 にすると、暗くなりません。1 以上で 0 以下の値を使用すると、より特殊な効果をもたらします。 |
| **Occlusion Depth Range** | この距離よりもカメラに近い全てのものは、ライトシャフトをオクルードします。 |
| **Enable Light Shaft Bloom** | ライトからライトシャフトブルームをレンダリングするか否かを設定するプロパティです。指向性ライトは、ライト方向周りの色に放射状ブラーが適用されてから再びシーンへ適用されます。 |
| **Bloom Scale** | ブルームの追加色をスケーリングして、多かれ少なかれ明確にします。 |
| **Bloom Threshold** | ライトシャフトにブルームを作成するためにシーンカラーに必要な閾値です。 |
| **Bloom Tint** | ブルームの色を作成するためにシーンの色に反して乗算します。ライトシャフトのブルーム効果をカラー化します。 |
| **Light Shaft Override Direction** | ライトの実際の方向以外のどこかから発生するライトシャフトの作成に使用します (ゼロではなく、かつノーマライズする必要がない場合のみ使用されます)。|
  
## オクルージョン手法
  
オクルージョン手法は画面上のオブジェクトの深度からマスクの作成、ライトから離れてマスクへブラーの適用、またフォグや大気のマスクがけに使用します。フォグのシャドウイングがライトシャフトを作成するように、現実のライトシャフトのような振る舞いをします。つまりライトシャフトは、フォグや大気と同等の強度にしか出来ないという意味があることに留意してください。より現実味のある表現をゲームに作成することが目的です。  
  
[REGION:lightbox]
[![](2LightShafts.png)(w:900)](2LightShafts.png)
[/REGION]

太陽の指向性ライトは、スクリーンからわずかに外れてオクルージョン ライトシャフトを生成することが可能ですが、現時点ではユーザーが太陽から 90 度の角度でアプローチするとフェードアウトしてしまいます。
 
## ブルーム手法
  
ブルーム手法は、ワールド空間の光源周りのシーンカラー (透明度やフォグ イン スキャタリングを含む) をキャプチャして、ライトから離れた位置で放射状ブラーを適用します。この手法は現実世界の現象をエミュレートするわけではありませんが、制御がとても簡単 (フォグの濃度に制限されない) で印象的な表現を作成します。明るく照らされた雲など、太陽面付近の明るい領域にはブルーム手法が最も効果的です。明るい太陽面は領域が小さくブラーの適用はイメージ空間操作となるため、エイリアシングが発生します。 

[REGION:lightbox]
[![](5LightShafts.png)(w:900)](5LightShafts.png)
[/REGION]

## GPU 負荷 
  
エフェクト (オクルージョンとブルーム) にはそれぞれ負荷がかかるので、希望する方法を 1 つ使用するのが良いでしょう。680GTX で 1080p となり、オクルージョンは「.5ms」、単一ライト上のブルームは「.68ms」です。 

[COMMENT:none]
 Redundant Images
[REGION:lightbox]
[![](2LightShafts.png)(h:250)](2LightShafts.png) [![](5LightShafts.png)(h:250)](5LightShafts.png) 
[/REGION]

[/COMMENT]