INTSourceChangelist:3242329
Availability:Public
Title:サブサーフェス シェーディングモデル
Crumbs: %ROOT%, Engine, Engine/Rendering/Materials
Description:マテリアルで利用可能なサブサーフェス シェーディング モデルの説明と技術的な詳細。
Version:4.9
parent:Engine/Rendering/Materials/LightingModels
order:1
topic-image:sss_topic.png
type:overview
tags:Materials

ワックスや淡緑色など不透明に表示されるマテリアルを対象とする新規のサブサーフェス シェーディング モデル (**_MLM_Subsurface_**) がマテリアルに加わりました。不透明に見えますが、ライティングが内側で散乱し、表面逆側からのライトの一部が透けて見えます。

![Jade Material](Engine/Rendering/Overview/jade_statue.png)(w:588) ![Ice Material](Engine/Rendering/Overview/ice_mounds.png)(w:588)

多くの場合、サブサーフェス スキャタリング (SSS) は人間や他の生物の皮膚をリアルにつくるために使用されます。しかし、このシェーディング モデルのエフェクトは、通常の皮膚のレンダリングで使用されるものよりもクオリティが低く負荷は小さくなっています。

## 技術的な詳細

サブサーフェス ライティングの 2 つの構成要素は、ラップアラウンドの「N dot H」の項とライトの背面散乱の項であり、SSS オブジェクトの反対側にライトがあたると表示されます。この 2 つは両方とも指数関数的なシャドウマップからの透過セルフシャドウイングによってマスクされます。

## マテリアル入力チャンネル

SubsurfaceColor の入力チャンネルは、SSS ライティングに影響を及ぼすマテリアル内のカラーを定義します。

マテリアルの Opacity チャンネルは、マテリアルがサブサーフェス スキャタリングと _MLM_Subsurface_ シェーディング モデルを使用すると若干違う意味合いをもつようになります。こうしたタイプのサーフェスは完全に不透明であるため、この場合の Opacity はライトを散乱する場合にマテリアルがどれくらいの密度になるかを制御するだけでなく以下も制御します。

* 法線がサブサーフェス ライティングにどれくらい影響を及ぼすか。不透明度が高いマテリアルほど法線の影響をより多く受けます。
* セルフシャドウイングのためにライティングがマテリアルをどれくらい遠くに通り抜けるか。オパシティが小さいほどライトは遠くに届きます。
* シャドウがどれくらい滑らかにマテリアルにおとされるか。オパシティが小さいほど滑らかなシャドウになりますが、滑らかさは固定されます。


[REGION:tip]
サブサーフェス マテリアルに対する Opacity を妥当な値、例えば、0.1 に設定するようにしてください。デフォルトのオパシティは 1 です。これは、満足のゆくサブサーフェス タイプのエフェクトにはなりません。
[/REGION]

## 制限事項

さらに、現在の実装では、以下の制限事項があります。

* ポイントライトのシャドウイングに未対応です。
* カスケードされたシャドウマップにシーム (継ぎ目) があります。 
* シャドウ キャスターに十分近ければ、SSS マテリアルは完全に不透明なマテリアルを通してもリークしたライティングを受ける場合があります
* 低オパシティからの滑らかなシャドウは、滑らかさに制約があり、エイリアシングもあります。


