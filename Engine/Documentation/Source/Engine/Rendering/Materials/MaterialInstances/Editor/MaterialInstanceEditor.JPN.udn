INTSourceChangelist:2856296
Availability:Public
Title:マテリアル インスタンス エディタ ユーザーガイド
Crumbs: %ROOT%, Engine, Engine/Rendering/Materials, Engine/Rendering/Materials/MaterialInstances
Description:MaterialInstanceConstants を修正するためにマテリアル インスタンス エディタを使用するためのガイド
Version:4.9
SkillLevel:Intermediate
[TOC(start:2)]

マテリアル インスタンス エディタは、マテリアル インスタンスのパラメータを修正するために使用します。 
マテリアル インスタンスにあまり詳しくない場合は、 [インスタンス化マテリアル](Engine/Rendering/Materials/MaterialInstances) ページを参照してください。



## マテリアル インスタンス エディタを開く

マテリアル インスタンス エディタを開くには、いずれかの Material Instance アセットを **ダブルクリック** 、 
もしくは **コンテンツ ブラウザ** の Material Instance アセットのコンテクスト メニューを **右クリック** します。いずれかの操作をすると、マテリアル インスタンス エディタで特定のマテリアル インスタンスが編集のために開きます。または、アクタ上で **右クリック** し、**[Materials (マテリアル)]** メニューの **[Material Name (マテリアル名)]** サブメニューから **[Edit Material Instance (マテリアル インスタンスを編集)]** を選択しても 
または、アクタ上で **右クリック** し、**[Materials]** メニューの **[Material Name (マテリアル名)]** サブメニューから **[Edit Material Instance (マテリアル インスタンスを編集)]** を選択しても、マテリアル インスタンス エディタを開くことができます。



## マテリアル インスタンス エディタ インターフェース

マテリアル インスタンス エディタは以下の領域で構成されています。

![materialinstanceeditor.png](materialinstanceeditor.png)(w:900 h:662)


1. [ツールバー](#ツールバー) - アセットを保存し、コンテンツ ブラウザに入れて、レンダリング統計情報を表示することができます。
1. [ビューポート表示オプション](#ビューポート表示オプション) - ビューポートで使用したメッシュを変更することができます。
1. [詳細ペイン](#詳細ペイン) - マテリアル インスタンスのプロパティです。
1. [親リスト](#親リスト) - 現在のマテリアル インスタンスの親のチェーンのリストです。
1. [ビューポート](#ビューポート) - 現在のマテリアル インスタンスをプレビューします。



### ツールバー

| **アイコン** | **説明** | 
| --- | --- |
|  ![](button_MIE_Save.png) | 現在のアセットを保存します。 |
|  ![](button_MIE_Find.png) | **コンテンツ ブラウザ** でマテリアル インスタンス定数を検索します。|
| ![](button_MIE_Params.png) | **[Properties (プロパティ)]** ペインで表示される親マテリアルに全てのマテリアル パラメータを作ります。 |
| ![](button_MIE_Mobile_Stats.png) | モバイルのマテリアル統計情報とコンパイルエラーを切り替えます。 |


### ビューポート表示オプション
| **アイコン** | **説明** | 
| --- | --- |
| ![](button_MIE_Cylinder.png) | シリンダー上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Sphere.png) | 球体上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Plane.png) | プレーン上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Cube.png) | キューブ上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Mesh.png) | カスタム仕様のスタティック メッシュ上のマテリアル インスタンスをプレビューします。 |
| ![](Viewport_Options_Button.png) | リアルタイムのプレビューを有効にし、プレビュー ウィンドウの FOV の設定を可能にします。  |
| ![](View_Type_Button.png) | パースペクティブ (Perspective) と 正投影 (Orthographic) 表示オプションを切り替えます。 |
| ![](Viewmode_Options_Button.png) | Lit (ライティング有り)、Unlit (ライティング無し)、ワイヤーフレームなど異なるビューモードに切り替えます。 |
| ![](Show_Button.png) | レンダリングの統計情報、グリッド、バックグラウンドを有効 / 無効にします。 |


###詳細ペイン

![](MIE_Properties.png)

マテリアル インスタンス エディタの **[Details (詳細)]** ペインは、すべての「作業」が行われる場所です。マテリアル インスタンスを使用している人は誰でも、[Details (詳細)] ペインでパラメータの 
マテリアル インスタンスの親マテリアル内に存在する各パラメータは、親マテリアルのパラメータに割り当てられた [グループ](Engine/Rendering/Materials/MaterialInstances#パラメータグループ) の 
  **Parameter Groups** にリスト化されます。デフォルトでは、親のパラメータ値がオーバーライドされることはありません。使用するには有効にする必要があります。 
 パラメータを有効にするには、有効にしたいパラメータ名の横にあるグレーアウトしているボックスをマウスの左ボタンでクリックします。 
 こうすると、グレーアウトが解除され、対象のパラメータの調整が可能になります。 

* **Parameter Groups** - 親マテリアルからマテリアル インスタンスに公開されている値をすべて変更することができるセクションです。 
* **General** - 親マテリアル、物理マテリアルの変更、さらにマテリアル インスタンスの Lightmass ビルドへの影響の調整、親マテリアルから継承したいくつかのプロパティのオーバーライドを可能にする一般的なセクションです。 

### 親リスト

![](MIE_Parent.png)

マテリアル インスタンスは他のマテリアル インスタンスを親として持つことができるので、ベースがなくなってしまったマテリアル インスタンスのオリジナルのマテリアルを探すのが難しい場合があります。
親リストは、現在のマテリアル インスタンスの親をチェーンが開始されたルート マテリアルまでずっとさかのぼって表示するので、そのような問題を解決します。
例えば、上で表示された親リストには、マテリアル インスタンス **MasterDemoMaterial_Parent** を親にもつ **Instance_Metallic_Medium** という名前のマテリアルが示されています。
 **MasterDemoMaterial_Parent** は **MasterDemoMaterial** を親に持っていることが親リストで分かります。編集中のインスタンスは **太字** で表示されます。

さらに、親リスト上で項目を何か **ダブルクリック** すると、その親のエディタが起動します。親の項目を右クリックして **[Find in Content Browser (コンテンツブラウザで検索)]** を選択すると、 
コンテンツブラウザで親を探すことができます。


### ビューポート

![](MIE_Preview.png)

マテリアル ビューポートは、メッシュに適用する編集中のマテリアルを表示します。以下の方法でビューポートとインタラクトすることができます。

* **マウスの左ボタン** をドラッグしてメッシュを回転させます。 
* **マウスホイール** でドラッグしてパンし、**マウスの右ボタン** でドラッグしてズームします。  
* 光の方向を回転させるには、 **L** キーを押したまま **マウスの左ボタン** を使ってドラッグします。


プレビュー メッシュは、関連するボタン制御を利用して変更できます (形状ボタン、**[Select Preview Mesh]** コンボ、**[Use Selected StaticMesh]** ボタン)。
プレビュー メッシュはマテリアルと一緒に保存されるので、次回そのマテリアルがをマテリアル エディタで開くと、同じメッシュ上でプレビューされます。


![](MIE_Change_Shapes.png)

マテリアル インスタンス エディタのビューポートは、各種シェーダータイプのインストラクション数や、 
マテリアルが使用しているテクスチャ サンプル数などのマテリアル情報も表示します。

![](MIE_Ins_Count.png)

マテリアルの移動設定をプレビューするには、小さな白い三角をクリックして[Viewport (ビューポート)] オプションを有効にしてから、ストップウォッチの形をしたアイコンをクリックすると、リアルタイム プレビューを有効にすることができます。 
キーボードで CTRL + R を一緒に押しても、リアルタイム プレビューの有効 / 無効の切り替えができます。

![](MIE_Real_Time.png)


## インスタンスの作成

[INCLUDE:Engine/Rendering/Materials/MaterialInstances#MakingAnInstance]

## マテリアル インスタンス パラメータのオーバーライド

それぞれのパラメータ名の左側にあるチェックボックスで、オーバーライドされた値を使用するかどうかを指定します。
つまり、以下の **Base Metal 、Base Roughness 、 Chrome Roughnes** と **OPACITY Chrome** は使用されますが、 **Base Scratch Roughness 、Base UV Tile** と **Chrome Metal** は使用されません。
チェックを入れた値のみがメモリ保存の理由で格納され、チェックされなかった値はマテリアル インスタンス エディタのウィンドウが閉じた時に消えます。

![](MIE_Overriding.png)

### マテリアル インスタンス ライトマス設定のオーバーライド
[Lightmass Settings (ライトマス設定)] セクションを展開してオーバーライドしたいプロパティをクリックして有効にすると、マテリアル インスタンスのライトマスとのインタラクションの仕方を操作するパラメータもオーバーライドできます。 
Lightmass プロパティのオーバーライドを有効にしたら、**[Parameter Value (パラメータ値)]** セクションで使うデータを新規入力します。 
以下の画像では、スカイボックス用のマテリアル インスタンスを選択し、**[Emissive Boost]** を 1.0 ではなく 2.0 になるようにオーバーライドしました。これにより、レベル ライティングのビルド時に、マテリアルのエミッシブ (発行色) 部分が Lightmass ビルドにより多くのライトをキャストさせ、レベル ライティングを全体的に明るくします。

![](Override_Lightmass_Settings.png)

### 親マテリアル設定のオーバーライド
利用できるマテリアル インスタンスがまさに求めているものに合わない場合があります。 
例えば、マテリアル インスタンスを片面ではなく両面する必要があるとします。 
これを修正するには、そのマテリアル インスタンスの親マテリアルを探して両面になるように設定します。ただし、この親マテリアルを使う他のマテリアル インスタンスがすべて両面になるため、それもまた問題です。 
それに代わる方法として、マテリアル インスタンスの **[Material Property Overrides]** セクションでマテリアル インスタンス内の任意の Parent Material プロパティをオーバーライドすることができます。

![](Overried_Parent_Material_Settings.png)

上の画像では、[Material Property Overrides] セクションの **[Two Sided (両面)]** オプションを有効にして、スカイボックスのマテリアル インスタンスが片面ではなく両面になるように設定しました。 
こうすると、見えないようにするために表面を裏返しにしたジオメトリ上に置かれた場合ですら、マテリアル インスタンスが常にレンダリングするようにします。






