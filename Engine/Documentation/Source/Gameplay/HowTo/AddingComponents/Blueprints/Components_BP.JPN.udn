INTSourceChangelist:3429254
Availability:Public
Title:ブループリントにコンポーネントを追加する
Crumbs: %ROOT%, Gameplay, Gameplay\HowTo\AddingComponents
Description:ブループリントにコンポーネントを追加するための操作ガイド 
Version:4.9
SkillLevel:Intermediate
type:how-to

[TOC (start:2 end:2)]

このページでは、ブループリントへの **コンポーネント** の追加方法、ブループリント内でのコンポーネントのアクセスと修正方法を説明します。説明用に、 **Static Mesh** コンポーネント (茂み)、 **Audio** コンポーネント (炎のサウンド エフェクト)、 **Particle Effect** (炎を可視化するエフェクト) の3 つのコンポーネントで構成される Burning Bush (燃える茂み) のブループリントのサンプルを作成します。 

## ブループリントにコンポーネントを追加する

 _この例では、**Blueprint Third Person テンプレート (with Starter Content)** を使用します。_

以下は、Blueprint アクタにコンポーネントを追加するステップです。 

1.	**コンテンツ ブラウザ** の **「StarterContent/Props」** フォルダの **SM_Bush** アセットを **右クリック** し、**Asset Actions** までスクロールし、**[Create Blueprint Using This...]** を選択します。 

	![](Components1.jpg)

	すると、このアセットをベースにブループリントが作成され、それがコンポーネントとしてブループリントに追加されます。 

1.	**[Create Blueprint]** ウィンドウが開いたら、 **[OK]** をクリックします。 

1.	**コンテンツ ブラウザ** の **「StarterContent/Blueprint」** フォルダから **SM_Bush** ブループリントを開きます。 

1.	**[Blueprint Editor]** ウィンドウの左上にある **[Viewport]** タブをクリックします。 

	![](Components2.png)

	Burning Bush アクタにその Bush が **コンポーネント** として追加されているのが分かります。

1.	**[Components]**タブで、 **[Components]** ウィンドウの **[Add Component]** ボタンをクリックします。 

	![](Components3.png)

	このウィンドウでコンポーネントをブループリントに追加できるようになります。この場合だと、炎とオーディオ エフェクトを追加できます。 

1.	**[Audio]** をクリックして Audio コンポーネントを追加すると、 **[Components]** ウィンドウの下の **[Details]** ウィンドウにデータが入ります。 

	![](Components4.png)

	ここでコンポーネントに関する詳細を指定します。追加したコンポーネントによって、定義可能なオプションの内容も異なります。ここでは、Audio コンポーネントが使う実際の Sound アセットを定義していきます。 

1.	**[Details]** パネルで、 **[Sound]** の下の **[None]** ボックスをクリックし、 **Fire01_Cue** アセットを選択します。 

	![](Components5.png)

	これで茂みから聞こえてくる炎のサウンド エフェクトが追加されました。 

1.	**[Add Component]** ボタンをもう一度押して、リストをスクロールし **Particle System** コンポーネントを追加します。 

	![](Components6.png)

1.	**パーティクルエフェクト** の **[Details]** パネル内の **[Template]** の隣にある **[None]** ボックスをクリックして、 **P_Fire** を選択します。 

	![](Components7.png)

1.	ブループリントを終了することができます。ウィンドウの左上の **[Compile]** ボタンをクリックします。 

	![](Components8.png)

	**コンパイル** 後、緑のチェックが表示されれば、正常に行われたことを意味します。 

	![](Components9.png)

1.	ブループリントを終了し **コンテンツ ブラウザ** の「 **Game/Blueprints** 」フォルダで **SM_Bush** をレベルへドラッグします。 

	![](Components10.png)

1.	**[Play]** ボタンをクリックして、エディタで再生します。 

茂みからは炎があがり、炎のオーディオ エフェクトが再生されていることが分かります。茂みから遠ざかるとオーディオは徐々に小さくなり、茂みに近づくと徐々に大きくなります。 

これで、3 つのコンポーネントで構成される Blueprint アクタが作成されました。レベルに茂みを配置し、茂みの中にオーディオを配置して、茂み内に炎を配置することも可能ですが、それだと要素がバラバラになるので、 3 つのコンポーネントで構成されるブループリントを 1 つ作成した方が管理は遥かに楽になります。 


## ブループリントでコンポーネントの作業をする

ブループリント内の各コンポーネントはブループリント自体から、または外部のブループリントからのアクセスと修正が可能です。例えば、 Car ブループリントがあり、コンポーネントとして Engine ブループリントがあった場合、Engine ブループリント内の値を調整することにより Car が動作する方法を修正することができます。 

燃える茂みのサンプルを使って、**[MyBlueprint]** ウィンドウを見ると、コンポーネントがそれぞれ [Components] セクションに設定されていることが分かります。

![](Components12.png)

これらのコンポーネントをひとつずつグラフ内に配置し、ブループリント スクリプトによるアクセスと修正が可能です (以下の例を参照)。 

![](Components13.png)

ここでプレイヤーがキーの押下で修正できるように、Burning Bush Blueprint アクタへの入力を有効にします。**F** Key Event を追加します。これを押すと、パーティクル システムと Audio コンポーネントの有効化と無効化が切り替わります (キーを押した時にオンまたはオフになります)。 


## 追加のリソース

ブループリントにコンポーネントを追加することに関する考え方を、以下のリンクで参照することができます。

*	[ブループリント ユーザーガイド](Engine/Blueprints/UserGuide)
*	[ブループリントでコンポーネントを使用する](Engine/Blueprints/UserGuide/Components)
*	[ブループリント グラフを操作する](Engine/Blueprints/UserGuide/Graphs)








