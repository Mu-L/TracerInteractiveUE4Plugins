INTSourceChangelist:4241091
Availability: NoPublish
Title: BuildGraph预定义任务
Crumbs: %ROOT%, Programming, Programming/Development, Programming/Development/BuildGraph, Programming/Development/BuildGraph/BuildGraphScriptTasks
Description: 这是过程化生成的markdown页面。
version: 4.21
parent:Programming/Development/BuildGraph/BuildGraphScriptTasks

(#agestore)
### AgeStore

从文件集中剥离符号的任务。此任务以Microsoft调试器工具SDK附带的AGESTORE工具命名，实际上是一个单独的实现。主要的区别在于其使用的是最后修改时间来决定要删除的文件，而非最后访问时间。

|          |                      |          |                                                                                                                                                                                                                                                                                                                                      |
| -------- | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 平台 | UnrealTargetPlatform | 必需 | 设置符号年龄的目标平台。                                                                                                                                                                                                                                                                                              |
| StoreDir | 字符串               | 必需 | 符号服务器目录。                                                                                                                                                                                                                                                                                                         |
| 天数     | Int32                | 必需 | 保存符号需要的天数。                                                                                                                                                                                                                                                                                             |
| 过滤器   | 字符串               | 可选 | 删除符号前子字符串应与目录文件命名匹配。多版本共享相同符号服务器时，“衰老储存”任务可避免删除其他版本中的符号。平台工具链定义的符号服务器结构将决定过滤器使用的特定数值。 |
| If       | 条件            | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                                                                                                                                                                                                    |

(#command)
### 命令

调用一个AutomationTool子进程运行给定的命令。

|                          |           |          |                                                                                                                                                                   |
| ------------------------ | --------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 命名                     | 字符串    | 必需 | 要执行的命令名                                                                                                                                       |
| 参数                | 字符串    | 可选 | 传至命令的参数                                                                                                                             |
| MergeTelemetryWithPrefix | 字符串    | 可选 | 如为非空，将使用给定前缀指示来自命令的遥测合入此UAT示例的遥测。可能出现空白（非空）字符串。 |
| If                       | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                                 |

(#commandlet)
### 命令行

生成编辑器运行命令行。

|           |           |          |                                                                                                          |
| --------- | --------- | -------- | -------------------------------------------------------------------------------------------------------- |
| 命名      | 字符串    | 必需 | 要执行的命令行命名                                                                           |
| 项目   | 文件规范 | 可选 | 和编辑器一同运行的项目                                                                       |
| 参数 | 字符串    | 可选 | 传至命令行的参数                                                                 |
| EditorExe | 文件名 | 可选 | 要使用的编辑器可执行文件。当前平台默认为开发UE4Editor可执行文件。 |
| If        | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                        |

(#compile)
### 编译

使用UnrealBuildTool编译目标。

|                       |                           |          |                                                                                   |
| --------------------- | ------------------------- | -------- | --------------------------------------------------------------------------------- |
| Target                | 字符串                    | 必需 | 要编译的目标                                                             |
| 配置         | UnrealTargetConfiguration | 必需 | 要编译的配置                                                      |
| 平台              | UnrealTargetPlatform      | 必需 | 编译针对的平台                                                       |
| 参数             | 字符串                    | 可选 | UnrealBuildTool 的额外参数                                          |
| AllowXGE              | 布尔                   | 可选 | 是否可使用XGE进行编译                                        |
| AllowParallelExecutor | 布尔                   | 可选 | 是否可使用此编译的并列执行程序                     |
| 标签                   | 标签列表                  | 可选 | 编译此任务产物所应用的标签                                  |
| If                    | 条件                 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#Cook)
### 烘焙

为特定平台烘焙一套地图

|           |           |          |                                                                                   |
| --------- | --------- | -------- | --------------------------------------------------------------------------------- |
| 项目   | 字符串    | 必需 | 需要烘焙的项目文件                                                         |
| 平台  | 字符串    | 必需 | 目标烘焙平台（如 WindowsNoEditor）                                 |
| 地图      | 字符串    | 可选 | 被烘焙的地图列表，由“+”字符间隔                            |
| 版本 | 布尔   | 可选 | 传至烘焙器的额外参数                                   |
| 参数 | 字符串    | 可选 | 传至烘焙器的额外参数                                   |
| 标签       | 标签列表  | 可选 | 编译此任务产物所应用的标签                                  |
| If        | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#copy)
### 复制

将文件从当前目录复制到另一个目录。

|           |           |          |                                                                                   |
| --------- | --------- | -------- | --------------------------------------------------------------------------------- |
| 文件     | 文件规范 | 可选 | 应用至输入文件列表的过滤器。可选。                        |
| 从      | 文件规范 | 必需 | 复制源头的样式（如Engine/*.txt）                                    |
| 到        | 文件规范 | 必需 | 需要复制到的目录                                                       |
| 覆盖 | 布尔   | 可选 | 是否覆盖现有文件                                        |
| 标签       | 标签列表  | 可选 | 编译此任务产物所应用的标签                                  |
| If        | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#cscompile)
### CsCompile

编译C#项目文件及其依赖性。

|               |           |          |                                                                                                                                     |
| ------------- | --------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| 项目       | 字符串    | 必需 | 要编译的C#项目文件。可用分号进行间隔，指定多个项目文件。                       |
| 配置 | 字符串    | 可选 | 要编译的配置                                                                                                        |
| 平台      | 字符串    | 可选 | 要编译的平台                                                                                                             |
| 参数     | 字符串    | 可选 | 传至编译器的额外选项                                                                                          |
| EnumerateOnly | 布尔   | 可选 | 只列举编译产物，不对项目进行实际编译。                                                                |
| 标签           | 标签列表  | 可选 | 编译此任务产物所应用的标签                                                                                    |
| TagReferences | 标签列表  | 可选 | 应用到项目中非私有引用的标签（即处于外部且未复制进输出dir） |
| If            | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                   |

(#delete)
### 删除

删除文件集。

|                        |           |          |                                                                                                            |
| ---------------------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------- |
| 文件                  | 文件规范 | 必需 | 文件规范列表，由分号间隔（如 *.cpp;Engine/.../*.bat）；或者标签集的命名 |
| DeleteEmptyDirectories | 布尔   | 可选 | 删除文件后是否删除空白目录。默认为true。                            |
| If                     | 条件 | 可选 | 是否执行此任务。若该条件计算出为false，则忽略此任务。                          |

(#log)
### 日志

将消息（和其他可选诊断信息）打印至输出日志

|                 |           |          |                                                                                     |
| --------------- | --------- | -------- | ----------------------------------------------------------------------------------- |
| 消息         | 字符串    | 可选 | 显示的消息                                                                |
| 文件           | 文件规范 | 可选 | 指定后，将在给定消息之后显示文件的给定列表。 |
| IncludeContents | 布尔   | 可选 | 指定后，将显示给定文件的内容。             |
| If              | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。   |

(#move)
### 移动

将文件从当前目录移动到另一个目录。

|       |           |          |                                                                                   |
| ----- | --------- | -------- | --------------------------------------------------------------------------------- |
| 文件 | 文件规范 | 可选 | 应用至输入文件列表的过滤器。可选。                        |
| 从  | 文件规范 | 必需 | 需要复制其文件的平台（如Engine/*.txt）                                    |
| 到    | 文件规范 | 必需 | 需要复制到的目录                                                       |
| 标签   | 标签列表  | 可选 | 编译此任务产物所应用的标签                                  |
| If    | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#msbuild)
### MsBuild

执行MsBuild

|               |           |          |                                                                                                               |
| ------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------- |
| 项目       | 字符串    | 必需 | 要编译的C#项目文件。可用分号进行间隔，指定多个项目文件。 |
| 配置 | 字符串    | 可选 | 要编译的配置                                                                                  |
| 平台      | 字符串    | 可选 | 要编译的平台                                                                                       |
| 参数     | 字符串    | 可选 | 传至编译器的额外选项                                                                    |
| 冗余度     | 字符串    | 可选 | MSBuild输出冗余度                                                                                  |
| If            | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                             |

(#pakfile)
### PakFile

从给定的文件集创建一个PAK文件。

|              |                |          |                                                                                                                                   |
| ------------ | -------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------- |
| 文件        | 文件规范      | 必需 | 添加到pak文件的文件列表、通配符和标签集，由“;”间隔。                                        |
| 输出       | 文件名      | 必需 | 输出的PAK文件                                                                                                                |
| ResponseFile | 文件名      | 可选 | 响应文件（包含添加到pak文件的文件列表）的路径，无需对其进行单独指定             |
| RebaseDir    | 目录命名 | 可选 | 重设相关文件基数的目录。指定后，列出的目录下最短路径将用于所有文件。 |
| 排序        | 文件名      | 可选 | 给出文件排序的脚本                                                                                             |
| 签名         | 字符串         | 可选 | 此pak文件的加密键                                                                                                 |
| 压缩     | 布尔        | 可选 | 是否压缩文件                                                                                                         |
| 参数    | 字符串         | 可选 | 传至UnrealPak的额外参数                                                                                    |
| 标签          | 标签列表       | 可选 | 编译此任务产物所应用的标签                                                                                  |
| If           | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                 |

(#rename)
### 重命名

重命名文件或文件组。

|       |                |          |                                                                                                 |
| ----- | -------------- | -------- | ----------------------------------------------------------------------------------------------- |
| 文件 | 文件规范      | 必需 | 需要重命名的单个或多个文件                                                                     |
| 从  | 目录名 | 可选 | 需要匹配的当前文件名或样式（如 *.txt）。不应包含任何路径分隔符。 |
| 到    | 路径名 | 必需 | 文件的新命名。不应包含任何路径分隔符。 |
| 标签   | 标签列表       | 可选 | 应用到重命名文件的标签                                                          |
| If    | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。               |

(#setversion)
### SetVersion

使用给定版本信息更新本地版本文件（Engine/Source/Runtime/Launch/Resources/Version.h, Engine/Build/Build.version及Engine/Source/Programs/DotNETCommon/Metadata.cs）。

|                  |           |          |                                                                                                                                                                  |
| ---------------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 变更           | Int32     | 必需 | 在版本文件中设置的变更列表                                                                                                                       |
| CompatibleChange | Int32     | 可选 | 在版本文件中设置的引擎兼容变更列表                                                                                                     |
| 分支           | 字符串    | 必需 | 分支字符串                                                                                                                                                |
| 版本            | 字符串    | 可选 | 编译版本字符串                                                                                                                                         |
| 注册者         | 布尔   | 可选 | 是否将IS_LICENSEE_VERSION标签设为true                                                                                                              |
| 提升         | 布尔   | 可选 | 是否将ENGINE_IS_PROMOTED_BUILD标签设为                                                                                                         |
| SkipHeader       | 布尔   | 可选 | 设置后，将不更新Version.h；仅更新数据文件（如 Build.version、Metadata.cs）。编辑器运行时可读取build.version中的版本变更列表。|
| SkipWrite        | 布尔   | 可选 | 设置后，不要对文件进行实际写入，返回将被更新的版本文件即可。对本地文件有用。                                        |
| 标签              | 标签列表  | 可选 | 编译此任务产物所应用的标签                                                                                                                 |
| If               | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                                |

(#sign)
### 签名

使用安装证书对可执行文件集进行签名。

|       |           |          |                                                                                                            |
| ----- | --------- | -------- | ---------------------------------------------------------------------------------------------------------- |
| 文件 | 文件规范 | 必需 | 文件规范列表，由分号间隔（如 *.cpp;Engine/.../*.bat）；或者标签集的命名 |
| Tag   | 标签列表  | 可选 | 编译此任务产物所应用的标签                                                           |
| If    | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                          |

(#spawn)
### 生成

生成一个外部可执行文件并等候其完成。

|            |           |          |                                                                                   |
| ---------- | --------- | -------- | --------------------------------------------------------------------------------- |
| Exe        | 文件名 | 必需 | 要生成的可执行文件                                                               |
| Arguments  | 字符串    | 可选 | 新建处理的参数                                           |
| ErrorLevel | Int32     | 可选 | 被认作错误的最小出口代码。                               |
| If         | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#stage)
### 暂存

编译中列出的暂存文件接收到输出目录。

|               |                           |          |                                                                                   |
| ------------- | ------------------------- | -------- | --------------------------------------------------------------------------------- |
| 项目       | 文件名                 | 可选 | 此目标所属的项目                                           |
| 目标        | 字符串                    | 必需 | 要暂存的目标名                                                       |
| 平台      | UnrealTargetPlatform      | 必需 | 要暂存的平台                                                                 |
| 配置 | UnrealTargetConfiguration | 必需 | 要暂存的配置                                                        |
| 架构  | 字符串                    | 可选 | 要暂存的架构                                                         |
| ToDir         | 字符串                    | 必需 | 暂存接收文件的目录                                   |
| 覆盖     | 布尔                   | 可选 | 是否覆盖现有文件                                               |
| 标签           | 标签列表                  | 可选 | 编译此任务产物所应用的标签                                  |
| If            | 条件 | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#strip)
### 剥离

从文件集中剥离调试信息。

|           |                      |          |                                                                                                      |
| --------- | -------------------- | -------- | ---------------------------------------------------------------------------------------------------- |
| 平台  | UnrealTargetPlatform | 必需 | 可剥离二进制的平台工具链                                                             |
| BaseDir   | 目录名       | 可选 | 文件存储的目录                                                                       |
| 文件     | 文件规范            | 必需 | 文件规范列表，由分号间隔（如 Engine/.../*.pdb）；或者标签集的命名 |
| OutputDir | 目录命名       | 可选 | 剥离文件的输出目录。默认为输入路径（覆盖输入文件）。   |
| 标签       | 标签列表             | 可选 | 编译此任务产物所应用的标签                                                     |
| If        | 条件            | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                    |

(#submit)
### 提交

新建一个变更列表并将文件集提交到Perforce流送。

|                 |                |          |                                                                                                                                                                              |
| --------------- | -------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 描述     | 字符串         | 必需 | 所提交变更列表的描述                                                                                                                                 |
| Files           | 文件规范      | 必需 | 要提交的文件                                                                                                                                                          |
| FileType        | 字符串         | 可选 | 提交的文件的Perforce文件类型（如二进制+FS32）                                                                                                             |
| 工作区       | 字符串         | 可选 | 工作区命名。指定后，将使用给定的流送和根目录提交文件。否则将使用当前工作区。 |
| 流送          | 字符串         | 可选 | 工作区的流送；默认为当前流送。除非同时指定工作区属性，否则将被忽略。                                                   |
| RootDir         | 目录命名 | 可选 | 流送的根目录。若未指定，默认为当前的根目录。                                                                                     |
| RevertUnchanged | 布尔        | 可选 | 进行提交前是否恢复未修改的文件                                                                                                                |
| If              | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                                            |

(#symstore)
### SymStore

从文件集剥离符号的任务

|          |                      |          |                                                                                   |
| -------- | -------------------- | -------- | --------------------------------------------------------------------------------- |
| 平台 | UnrealTargetPlatform | 必需 | 处理符号文件必需的平台工具链。                           |
| 文件    | 字符串               | 必需 | 输出文件的列表。将从该列表中提取PDB。                      |
| StoreDir | 字符串               | 必需 | 压缩文件的输出目录。                                      |
| 产物 | 字符串               | 必需 | 符号保存记录的产物命名。                                 |
| If       | 条件            | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#tag)
### 标签

将标签应用至给定文件集。列举“Files”参数给定的标签和文件规格可找到文件列表。与“Filter”参数不匹配的文件将首先从该列表中移除，之后移除由“Except”参数匹配的文件。

|         |                |          |                                                                                                                                                                                                                  |
| ------- | -------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| BaseDir | 目录命名 | 可选 | 设置基础目录解决相对路径和样式之间的冲突。设置后，所有绝对样式（如 /Engine/Build/...）将被视为与此路径相对。否则，其将被视为完全绝对。 |
| 文件   | 文件规范      | 必需 | 使用的文件集，包括通配符和标签名，由分号间隔。设置后，相对于BaseDir进行解决；否则便相对于分支根目录。                                              |
| 过滤器  | 文件规范      | 可选 | 用于过滤文件列表的样式，包括标签名或通配符。设置后，可能将包含应用至基础目录的样式。若未指定，则默认为所有文件。                                 |
| Except  | 文件规范      | 可选 | 需要从匹配列表中剔除的样式集。可能包含应用至基础目录的样式的标签名。                                                                                            |
| With    | 标签列表       | 必需 | 要应用的标签名                                                                                                                                                                                         |
| If      | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                                                                                |

(#tagreceipt)
### TagReceipt

从*.target文件读取，标记编译产物和/或运行时依赖性的任务。

|                                |                |          |                                                                                                                                                   |
| ------------------------------ | -------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 文件                          | 文件规范      | 必需 | 要读取的接收文件集（*.target），包括通配符和标签名，由分号间隔。                                              |
| EngineDir                      | 目录名 | 可选 | 引擎文件夹的路径，用于在接收文件中展开 $(EngineDir) 属性。默认为当前工作区的引擎目录。   |
| ProjectDir                     | 目录名 | 可选 | 项目文件夹的路径，用于在接收文件中展开$(ProjectDir)属性。默认为当前工作区的引擎目录。 |
| BuildProducts                  | 布尔        | 可选 | 是否标记列于接收中的编译产物                                                                                              |
| BuildProductType               | 字符串         | 可选 | 标记何种编译产物（参见TargetReceipt.cs - UnrealBuildTool.BuildProductType中的有效值）                                    |
| RuntimeDependencies            | 布尔        | 可选 | 是否标记列于接收中的运行时依赖性                                                                                        |
| StagedFileType                 | 字符串         | 可选 | 标记的运行时依赖性（查阅TargetReceipt.cs - UnrealBuildTool.StagedFileType中的有效值）                                |
| PrecompiledBuildDependencies   | 布尔        | 可选 | 是否标记列于接收中的预编译编译依赖性                                                                              |
| PrecompiledRuntimeDependencies   | 布尔        | 可选 | 是否标记列于接收中的预编译运行时依赖性                                                                            |
| With                           | 标签列表       | 必需 | 要应用的标记名                                                                                                                          |
| If                             | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                 |

(#unzip)
### 解压

从zip档案包中解压文件。

|         |                |          |                                                                                   |
| ------- | -------------- | -------- | --------------------------------------------------------------------------------- |
| ZipFile | 文件名      | 必需 | 解压zip文件的路径                                                   |
| ToDir   | 目录名 | 必需 | 解压文件的输出路径                                          |
| 标签     | 标签列表       | 可选 | 应用到解压文件的标签                                          |
| If      | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。 |

(#zip)
### 压缩

将文件压缩为zip档案包。

|         |                |          |                                                                                                                                                    |
| ------- | -------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| FromDir | 目录名 | 必需 | 读取压缩文件的目录                                                                                                        |
| 文件 | 文件规范      | 可选 | 文件规范列表，由分号间隔（如 *.cpp;Engine/.../*.bat）；或者标签集的命名。相对路径取自 FromDir。 |
| ZipFile | 文件名      | 必需 | 要创建的zip文件                                                                                                                             |
| 标签     | 标签列表       | 可选 | 应用到已创建zip文件的标签                                                                                                          |
| If      | 条件      | 可选 | 是否执行此任务。若该条件计算出false，则忽略此任务。                                                                  |

